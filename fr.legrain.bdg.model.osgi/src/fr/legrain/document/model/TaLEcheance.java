package fr.legrain.document.model;

// Generated Apr 9, 2009 2:12:06 PM by Hibernate Tools 3.2.0.CR1

import java.math.BigDecimal;
import java.math.RoundingMode;
import java.util.Date;
import java.util.HashSet;
import java.util.LinkedList;
import java.util.List;
import java.util.Set;

import javax.persistence.CascadeType;
import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.EntityListeners;
import javax.persistence.FetchType;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.Id;
import javax.persistence.JoinColumn;
import javax.persistence.ManyToOne;
import javax.persistence.OneToMany;
import javax.persistence.OneToOne;
import javax.persistence.SequenceGenerator;
import javax.persistence.Table;
import javax.persistence.Temporal;
import javax.persistence.TemporalType;
import javax.persistence.Transient;
import javax.persistence.Version;
import javax.xml.bind.annotation.XmlTransient;

import org.apache.log4j.Logger;
import org.hibernate.annotations.Fetch;
import org.hibernate.annotations.FetchMode;

//import fr.legrain.abonnement.model.TaAbonnement;
//import fr.legrain.abonnement.stripe.model.TaStripeSubscription;
//import fr.legrain.abonnement.stripe.model.TaStripeSubscriptionItem;
import fr.legrain.article.model.TaArticle;
import fr.legrain.article.model.TaLot;
import fr.legrain.document.dto.IDocumentTiers;
import fr.legrain.document.dto.TaLigneALigneSupplementDTO;
import fr.legrain.lib.data.LibCalcul;
import fr.legrain.validator.LgrHibernateValidated;


/**
 * TaLEcheance generated by hbm2java
 */
@Entity
//@Cache(usage=CacheConcurrencyStrategy.READ_WRITE)
//@EntityListeners(SwtLDocumentListener.class)
@Table(name = "ta_l_echeance")
//extends SWTLigneDocument
//@SequenceGenerator(name = "gen_l_echeance", sequenceName = "num_id_l_echeance", allocationSize = 1)
public class TaLEcheance  implements java.io.Serializable /*, ILigneDocumentTiers*/ {

	private static final long serialVersionUID = -3632467286758302843L;
	
	private int idLEcheance;
	private String version;
//	private TaTLigne taTLigne;
	private TaArticle taArticle;
//	private Integer numLigneLDocument;
	private String libLDocument;
	private BigDecimal qteLDocument;
//	private BigDecimal qte2LDocument;
	private String u1LDocument;
//	private String u2LDocument;
	private BigDecimal prixULDocument;
	private BigDecimal tauxTvaLDocument;
//	private String compteLDocument;
//	private String codeTvaLDocument;
//	private String codeTTvaLDocument;
	private BigDecimal mtHtLDocument;
	private BigDecimal mtTtcLDocument;
	private BigDecimal remTxLDocument;
	private BigDecimal remHtLDocument;
//	private TaAbonnement taAbonnement;
//	private TaStripeSubscription taStripeSubscription;
//	private TaStripeSubscriptionItem taStripeSubscriptionItem;
	
	private TaAbonnement taAbonnement;
	private TaLAbonnement taLAbonnement;

	
	private Date debutPeriode;
	private Date finPeriode;
	private Date dateEcheance;
	private Date dateFinCalcul;
	private Date debAbonnement;
	private Date finAbonnement;
	private BigDecimal pourcIndice;
	private BigDecimal pourcPartenaire;
	
	private Date dateAnnulation;
	private String commentaireAnnulation;
	
	private String quiCree;
	private Date quandCree;
	private String quiModif;
	private Date quandModif;
	private Integer versionObj;
	private String ipAcces;
	
	protected Integer nbDecimalesPrix;
	protected Integer nbDecimalesQte;
	
	//rajout yann pour etat
	private Set<TaLigneALigne> taLigneALignes = new HashSet<TaLigneALigne>(0);
	private Set<TaREtatLigneDocument> taREtatLigneDocuments = new HashSet<TaREtatLigneDocument>(0);
	private Set<TaHistREtatLigneDocument> taHistREtatLigneDocuments = new HashSet<TaHistREtatLigneDocument>(0);
	private Set<TaLigneALigneEcheance> taLigneALignesEcheance = new HashSet<TaLigneALigneEcheance>(0);
	@Transient
	private List<TaLigneALigneSupplementDTO> listeSupplement=new LinkedList<>();
	@Transient
	private List<TaLigneALigneSupplementDTO> listeLigneAIntegrer=new LinkedList<>();
	protected TaREtatLigneDocument taREtat;
	
	@Transient
	private boolean legrain = false;
//	@Transient
//	private BigDecimal txRemHtDocument;
	@Transient
	static Logger logger = Logger.getLogger(TaLEcheance.class.getName());
	@Transient
	private BigDecimal mtHtLApresRemiseGlobaleDocument;
	@Transient
	private BigDecimal mtTtcLApresRemiseGlobaleDocument;
	@Transient
	private Boolean accepte=true;
	
	private BigDecimal coefMultiplicateur;
	
	private Boolean grace = false;
	
	
//	private TaLAvisEcheance taLAvisEcheance;
//	private TaLFacture taLFacture;
	
	public TaLEcheance() {
	}
	
	public TaLEcheance	(boolean legrain) {
		this.legrain = legrain;
	}
	
	public TaLEcheance(int idLEcheance) {
		this.idLEcheance = idLEcheance;
	}

	@Id
	@GeneratedValue(strategy = GenerationType.IDENTITY)
	@Column(name = "id_l_echeance", unique = true, nullable = false)
	public int getIdLEcheance() {
		return idLEcheance;
	}

	public void setIdLEcheance(int idLEcheance) {
		this.idLEcheance = idLEcheance;
	}

	@Column(name = "version", length = 20)
	public String getVersion() {
		return this.version;
	}

	public void setVersion(String version) {
		this.version = version;
	}

//	@ManyToOne(fetch = FetchType.LAZY)
//	@JoinColumn(name = "id_t_ligne")
//	@LgrHibernateValidated(champ = "id_t_ligne",table = "ta_t_ligne",clazz = TaTLigne.class)
//	public TaTLigne getTaTLigne() {
//		return this.taTLigne;
//	}
//
//	public void setTaTLigne(TaTLigne taTLigne) {
//		this.taTLigne = taTLigne;
//	}

	@ManyToOne(fetch = FetchType.LAZY, cascade = CascadeType.REFRESH)
	@JoinColumn(name = "id_article")
	@LgrHibernateValidated(champBd = "id_article",table = "ta_article", champEntite="taArticle.idArticle", clazz = TaArticle.class)
	public TaArticle getTaArticle() {
		return this.taArticle;
	}

	public void setTaArticle(TaArticle taArticle) {
		this.taArticle = taArticle;
	}


//	@Column(name = "num_ligne_l_document")
//	@LgrHibernateValidated(champ = "num_ligne_l_document",table = "ta_l_echeance", champEntite="xxxxxxxxxxxx", clazz = TaLEcheance.class)
//	public Integer getNumLigneLDocument() {
//		return this.numLigneLDocument;
//	}
//
//	public void setNumLigneLDocument(Integer numLigneLEcheance) {
//		this.numLigneLDocument = numLigneLEcheance;
//	}

	@Column(name = "lib_l_document")
	@LgrHibernateValidated(champBd = "lib_l_document",table = "ta_l_echeance", champEntite="libLDocument", clazz = TaLEcheance.class)
	public String getLibLDocument() {
		return this.libLDocument;
	}

	public void setLibLDocument(String libLEcheance) {
		this.libLDocument = libLEcheance;
	}

	@Column(name = "qte_l_document", precision = 15)
	@LgrHibernateValidated(champBd = "qte_l_document",table = "ta_l_echeance", champEntite="qteLDocument", clazz = TaLEcheance.class)
	public BigDecimal getQteLDocument() {
		return this.qteLDocument;
	}

	public void setQteLDocument(BigDecimal qteLEcheance) {		
		BigDecimal qteLDocumentOld = this.qteLDocument;
		this.qteLDocument = qteLEcheance;
	}

//	@Column(name = "qte2_l_document", precision = 15)
//	@LgrHibernateValidated(champ = "qte2_l_document",table = "ta_l_echeance", champEntite="xxxxxxxxxxxx", clazz = TaLEcheance.class)
//	public BigDecimal getQte2LDocument() {
//		return this.qte2LDocument;
//	}
//
//	public void setQte2LDocument(BigDecimal qte2LEcheance) {
//		this.qte2LDocument = qte2LEcheance;
//	}

	@Column(name = "u1_l_document", length = 20)
	@LgrHibernateValidated(champBd = "u1_l_document",table = "ta_l_echeance", champEntite="u1LDocument", clazz = TaLEcheance.class)
	public String getU1LDocument() {
		return this.u1LDocument;
	}

	public void setU1LDocument(String u1LEcheance) {
		this.u1LDocument = u1LEcheance;
	}

//	@Column(name = "u2_l_document", length = 20)
//	@LgrHibernateValidated(champ = "u2_l_document",table = "ta_l_echeance", champEntite="xxxxxxxxxxxx", clazz = TaLEcheance.class)
//	public String getU2LDocument() {
//		return this.u2LDocument;
//	}
//
//	public void setU2LDocument(String u2LEcheance) {
//		this.u2LDocument = u2LEcheance;
//	}

	@Column(name = "prix_u_l_document", precision = 15)
	@LgrHibernateValidated(champBd = "prix_u_l_document",table = "ta_l_echeance", champEntite="prixULDocument", clazz = TaLEcheance.class)
	public BigDecimal getPrixULDocument() {
		return this.prixULDocument;
	}

	public void setPrixULDocument(BigDecimal prixULEcheance) {
		this.prixULDocument = prixULEcheance;
		if(legrain) {
			calculMontant();
		}
	}

	@Column(name = "taux_tva_l_document", precision = 15, scale = 4)
	@LgrHibernateValidated(champBd = "taux_tva_l_document",table = "ta_l_echeance", champEntite="tauxTvaLDocument", clazz = TaLEcheance.class)
	public BigDecimal getTauxTvaLDocument() {
		return this.tauxTvaLDocument;
	}

	public void setTauxTvaLDocument(BigDecimal tauxTvaLEcheance) {
		this.tauxTvaLDocument = tauxTvaLEcheance;
	}

//	@Column(name = "compte_l_document", length = 8)
//	@LgrHibernateValidated(champ = "compte_l_document",table = "ta_l_echeance", champEntite="xxxxxxxxxxxx", clazz = TaLEcheance.class)
//	public String getCompteLDocument() {
//		return this.compteLDocument;
//	}
//
//	public void setCompteLDocument(String compteLEcheance) {
//		this.compteLDocument = compteLEcheance;
//	}
//
//	@Column(name = "code_tva_l_document", length = 20)
//	@LgrHibernateValidated(champ = "code_tva_l_document",table = "ta_l_echeance", champEntite="xxxxxxxxxxxx", clazz = TaLEcheance.class)
//	public String getCodeTvaLDocument() {
//		return this.codeTvaLDocument;
//	}
//
//	public void setCodeTvaLDocument(String codeTvaLEcheance) {
//		this.codeTvaLDocument = codeTvaLEcheance;
//	}
//
//	@Column(name = "code_t_tva_l_document", length = 1)
//	@LgrHibernateValidated(champ = "code_t_tva_l_document",table = "ta_l_echeance", champEntite="xxxxxxxxxxxx", clazz = TaLEcheance.class)
//	public String getCodeTTvaLDocument() {
//		return this.codeTTvaLDocument;
//	}
//
//	public void setCodeTTvaLDocument(String codeTTvaLEcheance) {
//		this.codeTTvaLDocument = codeTTvaLEcheance;
//	}

	@Column(name = "mt_ht_l_document", precision = 15)
	@LgrHibernateValidated(champBd = "mt_ht_l_document",table = "ta_l_echeance", champEntite="mtHtLDocument", clazz = TaLEcheance.class)
	public BigDecimal getMtHtLDocument() {
		return this.mtHtLDocument;
	}

	public void setMtHtLDocument(BigDecimal mtHtLEcheance) {
		this.mtHtLDocument = LibCalcul.arrondi(mtHtLEcheance);
	}

	@Column(name = "mt_ttc_l_document", precision = 15)
	@LgrHibernateValidated(champBd = "mt_ttc_l_document",table = "ta_l_echeance", champEntite="mtTtcLDocument", clazz = TaLEcheance.class)
	public BigDecimal getMtTtcLDocument() {
		return this.mtTtcLDocument;
	}

	public void setMtTtcLDocument(BigDecimal mtTtcLEcheance) {
		this.mtTtcLDocument = LibCalcul.arrondi(mtTtcLEcheance);
	}

	@Column(name = "rem_tx_l_document", precision = 15)
	@LgrHibernateValidated(champBd = "rem_tx_l_document",table = "ta_l_echeance", champEntite="remTxLDocument", clazz = TaLEcheance.class)
	public BigDecimal getRemTxLDocument() {
		return this.remTxLDocument;
	}

	public void setRemTxLDocument(BigDecimal remTxLEcheance) {
		this.remTxLDocument = remTxLEcheance;
	}

	@Column(name = "rem_ht_l_document", precision = 15)
	@LgrHibernateValidated(champBd = "rem_ht_l_document",table = "ta_l_echeance", champEntite="remHtLDocument", clazz = TaLEcheance.class)
	public BigDecimal getRemHtLDocument() {
		return this.remHtLDocument;
	}

	public void setRemHtLDocument(BigDecimal remHtLEcheance) {
		this.remHtLDocument = remHtLEcheance;
	}

	@Column(name = "qui_cree", length = 50)
	public String getQuiCree() {
		return this.quiCree;
	}

	public void setQuiCree(String quiCreeLEcheance) {
		this.quiCree = quiCreeLEcheance;
	}

	@Temporal(TemporalType.TIMESTAMP)
	@Column(name = "quand_cree", length = 19)
	public Date getQuandCree() {
		return this.quandCree;
	}

	public void setQuandCree(Date quandCreeLEcheance) {
		this.quandCree = quandCreeLEcheance;
	}

	@Column(name = "qui_modif", length = 50)
	public String getQuiModif() {
		return this.quiModif;
	}

	public void setQuiModif(String quiModifLEcheance) {
		this.quiModif = quiModifLEcheance;
	}

	@Temporal(TemporalType.TIMESTAMP)
	@Column(name = "quand_modif", length = 19)
	public Date getQuandModif() {
		return this.quandModif;
	}

	public void setQuandModif(Date quandModifLEcheance) {
		this.quandModif = quandModifLEcheance;
	}

	@Column(name = "ip_acces", length = 50)
	public String getIpAcces() {
		return this.ipAcces;
	}

	public void setIpAcces(String ipAcces) {
		this.ipAcces = ipAcces;
	}

	@Version
	@Column(name = "version_obj")
	public Integer getVersionObj() {
		return this.versionObj;
	}

	public void setVersionObj(Integer versionObj) {
		this.versionObj = versionObj;
	}

	public void addREtatLigneDoc(TaEtat taEtat) {
		TaREtatLigneDocument rEtat=getTaREtat();
		if(rEtat!=null) {
			TaHistREtatLigneDocument hist=new TaHistREtatLigneDocument();
			hist.setTaEtat(getTaREtat().getTaEtat());
			hist.setTaLEcheance(this);
			this.getTaHistREtatLigneDocuments().add(hist);
		}else rEtat=new TaREtatLigneDocument();
		
		rEtat.setTaEtat(taEtat);
		rEtat.setTaLEcheance(this);
		this.setTaREtat(rEtat);
		this.getTaREtatLigneDocuments().add(rEtat);
	}
	public void initialiseLigne(boolean reset){
		if (reset){
			setLibLDocument("");
			setQteLDocument(null);
//			setQte2LDocument(null);
			setU1LDocument("") ;
//			setU2LDocument("") ;
			setPrixULDocument(null);
			setTauxTvaLDocument(null);
//			setCodeTvaLDocument("");
//			setCodeTTvaLDocument("");
			setMtHtLDocument(null);
			setMtTtcLDocument(null);
			setRemTxLDocument(null);
			setRemHtLDocument(null);
		}else {
			setLibLDocument("");
			setQteLDocument(new BigDecimal(0));
//			setQte2LDocument(new BigDecimal(0));
			setU1LDocument("");
//			setU2LDocument("");
			setPrixULDocument(new BigDecimal(0)) ;
			setTauxTvaLDocument(new BigDecimal(0));
//			setCodeTvaLDocument("");
//			setCodeTTvaLDocument("");
			setMtHtLDocument(new BigDecimal(0));
			setMtTtcLDocument(new BigDecimal(0));
			setRemTxLDocument(new BigDecimal(0));
			setRemHtLDocument(new BigDecimal(0)) ;
		}
//		setTaArticle(null);	
	}

	public void calculMontant() {
		if(qteLDocument!=null && prixULDocument!=null) {
//			if(taDocument!=null) {//#JPA
			prixULDocument=prixULDocument.setScale(nbDecimalesPrix,RoundingMode.DOWN);
			setMtHtLDocument(qteLDocument.multiply(prixULDocument));
			if(getCoefMultiplicateur() != null) {
				setMtHtLDocument(getMtHtLDocument().multiply(getCoefMultiplicateur()));
			}
					if(remTxLDocument!=null && remTxLDocument.signum()!=0){
						setMtHtLDocument(getMtHtLDocument().subtract(getMtHtLDocument().multiply(remTxLDocument.divide(new BigDecimal(100)))));
					}
					if( tauxTvaLDocument!=null && tauxTvaLDocument.signum()!=0){
						setMtTtcLDocument(mtHtLDocument.add((mtHtLDocument.multiply(tauxTvaLDocument.divide(new BigDecimal(100))))));
					} else {
						setMtTtcLDocument(mtHtLDocument);
					}				
				setMtTtcLApresRemiseGlobaleDocument(getMtTtcLDocument());
				setMtHtLApresRemiseGlobaleDocument(getMtHtLDocument());
			}
//		}
	}
	
//	@Transient
//	public BigDecimal getTxRemHtDocument() {
//		return txRemHtDocument;
//	}
//
//	public void setTxRemHtDocument(BigDecimal txRemHtEcheance) {
//		this.txRemHtDocument = txRemHtEcheance;
//	}
	

	//@Transient
	@Column(name = "mt_ht_apr_rem_globale", precision = 15)
	@LgrHibernateValidated(champBd = "mt_apr_rem_globale",table = "ta_l_echeance", champEntite="mtHtLApresRemiseGlobaleDocument", clazz = TaLEcheance.class)
	public BigDecimal getMtHtLApresRemiseGlobaleDocument() {
		return mtHtLApresRemiseGlobaleDocument;
	}

	public void setMtHtLApresRemiseGlobaleDocument(
			BigDecimal mtHtLApresRemiseGlobaleDocument) {
		this.mtHtLApresRemiseGlobaleDocument = mtHtLApresRemiseGlobaleDocument;
	}

	//@Transient
	@Column(name = "mt_ttc_apr_rem_globale", precision = 15)
	@LgrHibernateValidated(champBd = "mt_ttc_apr_rem_globale",table = "ta_l_echeance", champEntite="mtTtcLApresRemiseGlobaleDocument", clazz = TaLEcheance.class)
	public BigDecimal getMtTtcLApresRemiseGlobaleDocument() {
		return mtTtcLApresRemiseGlobaleDocument;
	}

	public void setMtTtcLApresRemiseGlobaleDocument(
			BigDecimal mtTtcLApresRemiseGlobaleDocument) {
		this.mtTtcLApresRemiseGlobaleDocument = mtTtcLApresRemiseGlobaleDocument;
	}

	public void setLegrain(boolean legrain) {
		this.legrain = legrain;
	}

//	@Override
//	public IDocumentTiers getTaDocument() {
//		// TODO Auto-generated method stub
//		return null;
//	}



//	@ManyToOne(fetch = FetchType.LAZY, cascade = CascadeType.REFRESH)
//	@JoinColumn(name = "id_abonnement")
//	public TaAbonnement getTaAbonnement() {
//		return taAbonnement;
//	}
//
//	public void setTaAbonnement(TaAbonnement taAbonnement) {
//		this.taAbonnement = taAbonnement;
//	}
	
//	@ManyToOne(fetch = FetchType.LAZY, cascade = CascadeType.REFRESH)
//	@JoinColumn(name = "id_stripe_subscription")
//	public TaStripeSubscription getTaStripeSubscription() {
//		return taStripeSubscription;
//	}
//
//	public void setTaStripeSubscription(TaStripeSubscription taStripeSubscription) {
//		this.taStripeSubscription = taStripeSubscription;
//	}

	
	@Temporal(TemporalType.DATE)
	@Column(name = "debut_periode", length = 19)
	public Date getDebutPeriode() {
		return debutPeriode;
	}

	public void setDebutPeriode(Date debutPeriode) {
		this.debutPeriode = debutPeriode;
	}

	@Temporal(TemporalType.DATE)
	@Column(name = "fin_periode", length = 19)
	public Date getFinPeriode() {
		return finPeriode;
	}

	public void setFinPeriode(Date finPeriode) {
		this.finPeriode = finPeriode;
	}

	@Temporal(TemporalType.DATE)
	@Column(name = "date_fin_calcul", length = 19)
	public Date getDateFinCalcul() {
		return dateFinCalcul;
	}

	public void setDateFinCalcul(Date dateFinCalcul) {
		this.dateFinCalcul = dateFinCalcul;
	}
	
	@Temporal(TemporalType.TIMESTAMP)
	@Column(name = "deb_abon", length = 19)
	public Date getDebAbonnement() {
		return debAbonnement;
	}

	public void setDebAbonnement(Date debAbonnement) {
		this.debAbonnement = debAbonnement;
	}
	
	@Temporal(TemporalType.TIMESTAMP)
	@Column(name = "fin_abon", length = 19)
	public Date getFinAbonnement() {
		return finAbonnement;
	}

	public void setFinAbonnement(Date finAbonnement) {
		this.finAbonnement = finAbonnement;
	}

	@Column(name = "pourc_indice")
	public BigDecimal getPourcIndice() {
		return pourcIndice;
	}

	public void setPourcIndice(BigDecimal pourcIndice) {
		this.pourcIndice = pourcIndice;
	}

	@Column(name = "pourc_partenaire")
	public BigDecimal getPourcPartenaire() {
		return pourcPartenaire;
	}

	public void setPourcPartenaire(BigDecimal pourcPartenaire) {
		this.pourcPartenaire = pourcPartenaire;
	}

	@Transient
	public Boolean getAccepte() {
		return accepte;
	}

	public void setAccepte(Boolean accepte) {
		this.accepte = accepte;
	}

	@Temporal(TemporalType.DATE)
	@Column(name = "date_echeance", length = 19)
	public Date getDateEcheance() {
		return dateEcheance;
	}

	public void setDateEcheance(Date dateEcheance) {
		this.dateEcheance = dateEcheance;
	}

//	@ManyToOne(fetch = FetchType.LAZY, cascade = CascadeType.REFRESH)
//	@JoinColumn(name = "id_stripe_subscription_item")
//	public TaStripeSubscriptionItem getTaStripeSubscriptionItem() {
//		return taStripeSubscriptionItem;
//	}
//
//	public void setTaStripeSubscriptionItem(TaStripeSubscriptionItem taStripeSubscriptionItem) {
//		this.taStripeSubscriptionItem = taStripeSubscriptionItem;
//	}
	
	@Column(name = "date_annulation")
	@Temporal(TemporalType.TIMESTAMP)
	public Date getDateAnnulation() {
		return dateAnnulation;
	}
	public void setDateAnnulation(Date dateAnnulation) {
		this.dateAnnulation = dateAnnulation;
	}
	
	@Column(name = "commentaire_annulation")
	public String getCommentaireAnnulation() {
		return commentaireAnnulation;
	}
	public void setCommentaireAnnulation(String commentaireAnnulation) {
		this.commentaireAnnulation = commentaireAnnulation;
	}

	
	@Column(name = "nb_decimales_qte")
	public Integer getNbDecimalesQte() {
		return nbDecimalesQte;
	}

	public void setNbDecimalesQte(Integer nbDecimalesQte) {
		this.nbDecimalesQte = nbDecimalesQte;
	}

	@Column(name = "nb_decimales_prix")
	public Integer getNbDecimalesPrix() {
		return nbDecimalesPrix;
	}

	public void setNbDecimalesPrix(Integer nbDecimalesPrix) {
		this.nbDecimalesPrix = nbDecimalesPrix;
	}
	@ManyToOne(fetch = FetchType.LAZY, cascade = CascadeType.REFRESH)
	@JoinColumn(name = "id_abonnement")
	public TaAbonnement getTaAbonnement() {
		return taAbonnement;
	}

	public void setTaAbonnement(TaAbonnement taAbonnement) {
		this.taAbonnement = taAbonnement;
	}
	@ManyToOne(fetch = FetchType.LAZY, cascade = CascadeType.REFRESH)
	@JoinColumn(name = "id_l_abonnement")
	public TaLAbonnement getTaLAbonnement() {
		return taLAbonnement;
	}

	public void setTaLAbonnement(TaLAbonnement taLAbonnement) {
		this.taLAbonnement = taLAbonnement;
	}
	
	@ManyToOne(fetch = FetchType.EAGER)
	@JoinColumn(name = "id_r_etat")
	public TaREtatLigneDocument getTaREtat() {
		return this.taREtat;
	}

	public void setTaREtat(TaREtatLigneDocument taREtat) {
		this.taREtat = taREtat;
	}

	
	
	

	@Transient
	public List<TaLigneALigneSupplementDTO> getListeSupplement() {
		// TODO Auto-generated method stub
		return listeSupplement;
	}

	@Transient
	public void setListeSupplement(List<TaLigneALigneSupplementDTO> listeSupplement) {
		// TODO Auto-generated method stub
		this.listeSupplement=listeSupplement;
	}


	@Transient
	public List<TaLigneALigneSupplementDTO> getListeLigneAIntegrer() {
		// TODO Auto-generated method stub
		return listeLigneAIntegrer;
	}

	@Transient
	public void setListeLigneAIntegrer(List<TaLigneALigneSupplementDTO> listeLigneAIntegrer) {
		// TODO Auto-generated method stub
		this.listeLigneAIntegrer=listeLigneAIntegrer;
	}


	@OneToMany(cascade = CascadeType.ALL, fetch = FetchType.LAZY, mappedBy = "taLEcheance", orphanRemoval=true)
	@XmlTransient
	public Set<TaLigneALigne> getTaLigneALignes() {
		return this.taLigneALignes;
	}

	public void setTaLigneALignes(Set<TaLigneALigne> taLigneALignes) {
		this.taLigneALignes = taLigneALignes;
	}
	
	

	
	@OneToMany(cascade = CascadeType.ALL, fetch = FetchType.LAZY, mappedBy = "taLEcheance", orphanRemoval = true)
	public Set<TaREtatLigneDocument> getTaREtatLigneDocuments() {
		return this.taREtatLigneDocuments;
	}

	public void setTaREtatLigneDocuments(Set<TaREtatLigneDocument> taREtats) {
		this.taREtatLigneDocuments = taREtats;
	}
	

	
	@OneToMany(cascade = CascadeType.ALL, fetch = FetchType.LAZY, mappedBy = "taLEcheance", orphanRemoval = true)
	public Set<TaHistREtatLigneDocument> getTaHistREtatLigneDocuments() {
		return this.taHistREtatLigneDocuments;
	}

	public void setTaHistREtatLigneDocuments(Set<TaHistREtatLigneDocument> taHistREtatLigneDocuments) {
		this.taHistREtatLigneDocuments = taHistREtatLigneDocuments;
	}
	@Column(name = "coef_multiplicateur", precision = 15 )
	public BigDecimal getCoefMultiplicateur() {
		return coefMultiplicateur;
	}

	public void setCoefMultiplicateur(BigDecimal coefMultiplicateur) {
		this.coefMultiplicateur = coefMultiplicateur;
	}
	
//	@OneToOne(fetch = FetchType.LAZY, cascade = {CascadeType.REFRESH} )
//	@JoinColumn(name = "id_l_avis_echeance")
//	public TaLAvisEcheance getTaLAvisEcheance() {
//		return taLAvisEcheance;
//	}
//
//	public void setTaLAvisEcheance(TaLAvisEcheance taLAvisEcheance) {
//		this.taLAvisEcheance = taLAvisEcheance;
//	}
//	@OneToOne(fetch = FetchType.LAZY, cascade = {CascadeType.REFRESH} )
//	@JoinColumn(name = "id_l_facture")
//	public TaLFacture getTaLFacture() {
//		return taLFacture;
//	}
//
//	public void setTaLFacture(TaLFacture taLFacture) {
//		this.taLFacture = taLFacture;
//	}

	@OneToMany(cascade = {CascadeType.REMOVE, CascadeType.MERGE}, fetch = FetchType.LAZY, mappedBy = "taLEcheance", orphanRemoval=true)
	@XmlTransient
	@Fetch(FetchMode.SUBSELECT)	
	public Set<TaLigneALigneEcheance> getTaLigneALignesEcheance() {
		return taLigneALignesEcheance;
	}

	public void setTaLigneALignesEcheance(Set<TaLigneALigneEcheance> taLigneALignesEcheance) {
		this.taLigneALignesEcheance = taLigneALignesEcheance;
	}
	@Column(name = "grace")
	public Boolean isGrace() {
		return grace;
	}

	public void setGrace(Boolean grace) {
		this.grace = grace;
	}	
}
