package fr.legrain.tiers.model;

import java.util.Comparator;

// Generated Mar 24, 2009 4:44:04 PM by Hibernate Tools 3.2.0.CR1

import java.util.Date;
import java.util.Set;

import javax.persistence.CascadeType;
import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.FetchType;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.Id;
import javax.persistence.JoinColumn;
import javax.persistence.ManyToOne;
import javax.persistence.NamedQueries;
import javax.persistence.NamedQuery;
import javax.persistence.Table;
import javax.persistence.Transient;
import javax.persistence.Version;
import javax.xml.bind.annotation.XmlElement;

import org.apache.log4j.Logger;
import org.eclipse.persistence.oxm.annotations.XmlInverseReference;

import com.ibm.icu.math.BigDecimal;

import fr.legrain.general.model.TaObjetLgr;
import fr.legrain.validator.LgrHibernateValidated;


/**
 * TaAdresse generated by hbm2java
 */
@Entity
//@Cache(usage=CacheConcurrencyStrategy.READ_WRITE)
@Table(name = "ta_adresse")
//@SequenceGenerator(name = "gen_adresse", sequenceName = "num_id_adresse", allocationSize = 1)
@NamedQueries(value = { 
		@NamedQuery(name=TaAdresse.QN.FIND_BY_IMPORT, query="select a from TaAdresse a left join a.taTAdr ta where a.origineImport = :origineImport and a.idImport = :idImport"),
		@NamedQuery(name=TaAdresse.QN.FIND_BY_TYPE, query="select a from TaAdresse a left join a.taTAdr ta where Ta.codeTAdr =:code"),
		@NamedQuery(name=TaAdresse.QN.FIND_BY_TYPE_ORDRE_TIERS, query="select MAX(a.ordre) from TaAdresse a left join a.taTAdr ta join a.taTiers t where t.codeTiers=:codeTiers and Ta.codeTAdr =:code")
		})
public class TaAdresse extends TaObjetLgr implements java.io.Serializable {
	

	
	/**
	 * 
	 */
	private static final long serialVersionUID = 963227205126755192L;
	@Transient
	static Logger logger = Logger.getLogger(TaAdresse.class.getName());

	public static class QN {
		public static final String FIND_BY_IMPORT = "TaAdresse.findByImport";
		public static final String FIND_BY_TYPE = "TaAdresse.findByType";
		public static final String FIND_BY_TYPE_ORDRE_TIERS = "TaAdresse.findByTypeOrdreTiers";
	}

	private int idAdresse;
//	private String version;
	private TaTAdr taTAdr;
	private TaTiers taTiers;
	private String adresse1Adresse;
	private String adresse2Adresse;
	private String adresse3Adresse;
	private String codepostalAdresse;
	private String villeAdresse;
	private String paysAdresse ;
	private Integer commCommercialAdresse=0;
	private Integer commAdministratifAdresse=0;
//	private String quiCree;
//	private Date quandCree;
//	private String quiModif;
//	private Date quandModif;
	private String idImport;
	private String origineImport;
//	private String ipAcces;
	private Integer versionObj;
	private Integer ordre=0;
	
	private String livraison;
	private String latitudeDec;
	private String longitudeDec;
	
		
//	private Set<TaTiers> taTierses = new HashSet<TaTiers>(0);

	public TaAdresse() {
		
	}

	public TaAdresse(int idAdresse) {
		this.idAdresse = idAdresse;
	}

	public TaAdresse(int idAdresse, TaTAdr taTAdr, TaTiers taTiers,
			String adresse1Adresse, String adresse2Adresse,
			String adresse3Adresse, String codepostalAdresse,
			String villeAdresse, String paysAdresse, String quiCreeAdresse,
			Date quandCreeAdresse, String quiModifAdresse,
			Date quandModifAdresse, String ipAcces, Integer versionObj,
			Set<TaTiers> taTierses) {
		this.idAdresse = idAdresse;
		this.taTAdr = taTAdr;
		this.taTiers = taTiers;
		this.adresse1Adresse = adresse1Adresse;
		this.adresse2Adresse = adresse2Adresse;
		this.adresse3Adresse = adresse3Adresse;
		this.codepostalAdresse = codepostalAdresse;
		this.villeAdresse = villeAdresse;
		this.paysAdresse = paysAdresse;
		this.quiCree = quiCreeAdresse;
		this.quandCree = quandCreeAdresse;
		this.quiModif = quiModifAdresse;
		this.quandModif = quandModifAdresse;
		this.ipAcces = ipAcces;
		this.versionObj = versionObj;
//		this.taTierses = taTierses;
	}

	@Id
	@GeneratedValue(strategy = GenerationType.IDENTITY)
	@Column(name = "id_adresse", unique = true, nullable = false)
	@LgrHibernateValidated(champBd = "id_adresse",table = "ta_adresse",champEntite="idAdresse", clazz = TaAdresse.class)
	public int getIdAdresse() {
		return this.idAdresse;
	}

	public void setIdAdresse(int idAdresse) {
		this.idAdresse = idAdresse;
	}

//	@Column(name = "version", length = 20)
//	public String getVersion() {
//		return this.version;
//	}
//
//	public void setVersion(String version) {
//		this.version = version;
//	}

	//@ManyToOne(fetch = FetchType.LAZY, cascade = {CascadeType.PERSIST, CascadeType.MERGE, CascadeType.REFRESH})
	@ManyToOne(fetch = FetchType.EAGER, cascade = { CascadeType.REFRESH})
	@JoinColumn(name = "id_t_adr")
	@LgrHibernateValidated(champBd = "id_t_adr",table = "ta_t_adr",champEntite="idTAdr", clazz = TaTAdr.class)
	public TaTAdr getTaTAdr() {
		return this.taTAdr;
	}

	public void setTaTAdr(TaTAdr taTAdr) {
		this.taTAdr = taTAdr;
	}

	@ManyToOne(fetch = FetchType.LAZY, cascade = {CascadeType.PERSIST, CascadeType.MERGE})
	@JoinColumn(name = "id_tiers")
	@LgrHibernateValidated(champBd = "id_tiers",table = "ta_tiers",champEntite="idTiers",clazz = TaTiers.class)
	@XmlElement
	@XmlInverseReference(mappedBy="taAdresses")
	public TaTiers getTaTiers() {
		return this.taTiers;
	}

	public void setTaTiers(TaTiers taTiers) {
		this.taTiers = taTiers;
	}

	@Column(name = "adresse1_adresse", length = 100)
	@LgrHibernateValidated(champBd = "adresse1_adresse",table = "ta_adresse",champEntite="adresse1Adresse",clazz = TaAdresse.class)
	public String getAdresse1Adresse() {
		return this.adresse1Adresse;
	}

	public void setAdresse1Adresse(String adresse1Adresse) {
		this.adresse1Adresse = adresse1Adresse;
	}

	@Column(name = "adresse2_adresse", length = 100)
	@LgrHibernateValidated(champBd = "adresse2_adresse",table = "ta_adresse",champEntite="adresse2Adresse",clazz = TaAdresse.class)
	public String getAdresse2Adresse() {
		return this.adresse2Adresse;
	}

	public void setAdresse2Adresse(String adresse2Adresse) {
		this.adresse2Adresse = adresse2Adresse;
	}

	@Column(name = "adresse3_adresse", length = 100)
	@LgrHibernateValidated(champBd = "adresse3_adresse",table = "ta_adresse",champEntite="adresse3Adresse",clazz = TaAdresse.class)
	public String getAdresse3Adresse() {
		return this.adresse3Adresse;
	}

	public void setAdresse3Adresse(String adresse3Adresse) {
		this.adresse3Adresse = adresse3Adresse;
	}

	@Column(name = "codepostal_adresse", length = 25)
	@LgrHibernateValidated(champBd = "codepostal_adresse",table = "ta_adresse",champEntite="codepostalAdresse",clazz = TaAdresse.class)
	public String getCodepostalAdresse() {
		return this.codepostalAdresse;
	}

	public void setCodepostalAdresse(String codepostalAdresse) {
		this.codepostalAdresse = codepostalAdresse;
	}

	@Column(name = "ville_adresse", length = 100)
	@LgrHibernateValidated(champBd = "ville_adresse",table = "ta_adresse",champEntite="villeAdresse",clazz = TaAdresse.class)
	public String getVilleAdresse() {
		return this.villeAdresse;
	}

	public void setVilleAdresse(String villeAdresse) {
		this.villeAdresse = villeAdresse;
	}

	@Column(name = "pays_adresse", length = 100)
	@LgrHibernateValidated(champBd = "pays_adresse",table = "ta_adresse",champEntite="paysAdresse",clazz = TaAdresse.class)
	public String getPaysAdresse() {
		return this.paysAdresse;
	}

	public void setPaysAdresse(String paysAdresse) {
		this.paysAdresse = paysAdresse;
	}
	
	@Column(name = "comm_commercial")
	@LgrHibernateValidated(champBd = "comm_commercial",table = "ta_adresse",champEntite="commCommercialAdresse",clazz = TaAdresse.class)
	public Integer getCommCommercialAdresse() {
		return this.commCommercialAdresse;
	}

	public void setCommCommercialAdresse(Integer commCommercialTelephone) {
		this.commCommercialAdresse = commCommercialTelephone;
	}
	
	@Column(name = "comm_administratif")
	@LgrHibernateValidated(champBd = "comm_administratif",table = "ta_adresse",champEntite="commAdministratifAdresse",clazz = TaAdresse.class)
	public Integer getCommAdministratifAdresse() {
		return this.commAdministratifAdresse;
	}

	public void setCommAdministratifAdresse(Integer commAdministratifTelephone) {
		this.commAdministratifAdresse = commAdministratifTelephone;
	}

//	@Column(name = "qui_cree", length = 50)
//	public String getQuiCree() {
//		return this.quiCree;
//	}
//
//	public void setQuiCree(String quiCreeAdresse) {
//		this.quiCree = quiCreeAdresse;
//	}
//
//	@Temporal(TemporalType.TIMESTAMP)
//	@Column(name = "quand_cree", length = 19)
//	public Date getQuandCree() {
//		return this.quandCree;
//	}
//
//	public void setQuandCree(Date quandCreeAdresse) {
//		this.quandCree = quandCreeAdresse;
//	}
//
//	@Column(name = "qui_modif", length = 50)
//	public String getQuiModif() {
//		return this.quiModif;
//	}
//
//	public void setQuiModif(String quiModifAdresse) {
//		this.quiModif = quiModifAdresse;
//	}
//
//	@Temporal(TemporalType.TIMESTAMP)
//	@Column(name = "quand_modif", length = 19)
//	public Date getQuandModif() {
//		return this.quandModif;
//	}
//
//	public void setQuandModif(Date quandModifAdresse) {
//		this.quandModif = quandModifAdresse;
//	}
	
	@Column(name = "origine_import", length = 100)
	@LgrHibernateValidated(champBd = "origine_import",table = "ta_adresse",champEntite="origineImport",clazz = TaAdresse.class)
	public String getOrigineImport() {
		return this.origineImport;
	}

	public void setOrigineImport(String origineImport) {
		this.origineImport = origineImport;
	}
	
	@Column(name = "id_import", length = 100)
	@LgrHibernateValidated(champBd = "id_import",table = "ta_adresse",champEntite="idImport",clazz = TaAdresse.class)
	public String getIdImport() {
		return this.idImport;
	}

	public void setIdImport(String idImport) {
		this.idImport = idImport;
	}

//	@Column(name = "ip_acces", length = 50)
//	public String getIpAcces() {
//		return this.ipAcces;
//	}
//
//	public void setIpAcces(String ipAcces) {
//		this.ipAcces = ipAcces;
//	}

	@Version
	@Column(name = "version_obj")
	public Integer getVersionObj() {
		return this.versionObj;
	}

	public void setVersionObj(Integer versionObj) {
		this.versionObj = versionObj;
	}


	@Column(name = "ordre")
	public Integer getOrdre() {
		return ordre;
	}

	public void setOrdre(Integer ordre) {
		this.ordre = ordre;
	}
	

	@Column(name="latitude_dec")
	public String getLatitudeDec() {
		return this.latitudeDec;
	}

	public void setLatitudeDec(String latitudeDec) {
		this.latitudeDec=latitudeDec;
	}
	
	@Column(name="longitude_dec")
	public String getLongitudeDec() {
		return this.longitudeDec;
	}

	public void setLongitudeDec(String longitudeDec) {
		this.longitudeDec=longitudeDec;
	}
	
	@Column(name="livraison")
	public String getLivraison() {
		return livraison;
	}

	public void setLivraison(String livraison) {
		this.livraison = livraison;
	}

	
//	@PrePersist
//	@PreUpdate
	public void beforePost ()throws Exception{
		this.setCodepostalAdresse(codepostalAdresse.toUpperCase());
		this.setVilleAdresse(villeAdresse.toUpperCase());
		this.setPaysAdresse(paysAdresse.toUpperCase());
	}

	
	
	public static class OrdreAdresseComparator implements java.io.Serializable,Comparator<TaAdresse> {
		 
		
	    /**
		 * 
		 */
		private static final long serialVersionUID = -8932155670031660177L;

		public int compare(TaAdresse obj1, TaAdresse obj2) {
	    	int premier=0; 
	    	int deuxieme =0;
	    	
	    	if(obj1.getTaTAdr()!=null && obj1.getTaTAdr().getCodeTAdr()!=null && obj2.getTaTAdr()!=null && obj2.getTaTAdr().getCodeTAdr()!=null )
	    		premier =obj1.getTaTAdr().getCodeTAdr().compareTo(obj2.getTaTAdr().getCodeTAdr());
	        
	        if(obj1.getOrdre()!=null && obj2.getOrdre()!=null)
	        	deuxieme = obj1.getOrdre().compareTo(obj2.getOrdre());

	        int compared = premier;
	        if (compared == 0) {
	            compared = deuxieme;
	        }
	 
	        return compared;
	    }

//		@Override
//		public Comparator<TaAdresse> reversed() {
//			// TODO Auto-generated method stub
//			return null;
//		}
//
//		@Override
//		public Comparator<TaAdresse> thenComparing(
//				Comparator<? super TaAdresse> other) {
//			// TODO Auto-generated method stub
//			return null;
//		}
//
//		@Override
//		public <U> Comparator<TaAdresse> thenComparing(
//				Function<? super TaAdresse, ? extends U> keyExtractor,
//				Comparator<? super U> keyComparator) {
//			// TODO Auto-generated method stub
//			return null;
//		}
//
//		@Override
//		public <U extends Comparable<? super U>> Comparator<TaAdresse> thenComparing(
//				Function<? super TaAdresse, ? extends U> keyExtractor) {
//			// TODO Auto-generated method stub
//			return null;
//		}
//
//		@Override
//		public Comparator<TaAdresse> thenComparingInt(
//				ToIntFunction<? super TaAdresse> keyExtractor) {
//			// TODO Auto-generated method stub
//			return null;
//		}
//
//		@Override
//		public Comparator<TaAdresse> thenComparingLong(
//				ToLongFunction<? super TaAdresse> keyExtractor) {
//			// TODO Auto-generated method stub
//			return null;
//		}
//
//		@Override
//		public Comparator<TaAdresse> thenComparingDouble(
//				ToDoubleFunction<? super TaAdresse> keyExtractor) {
//			// TODO Auto-generated method stub
//			return null;
//		}
	}



	@Override
	public int hashCode() {
		final int prime = 31;
		int result = 1;
		result = prime * result + ((taTAdr == null) ? 0 : taTAdr.hashCode());
		return result;
	}


	@Override
	public Object clone() throws CloneNotSupportedException {
		TaAdresse objet = new TaAdresse();
		try {
			objet.setAdresse1Adresse(adresse1Adresse);
			objet.setAdresse2Adresse(adresse2Adresse);
			objet.setAdresse3Adresse(adresse3Adresse);
			objet.setCodepostalAdresse(codepostalAdresse);
			objet.setCommAdministratifAdresse(commAdministratifAdresse);
			objet.setCommCommercialAdresse(commCommercialAdresse);
			objet.setOrdre(ordre);
//			objet.setOrigineImport(origineImport);
			objet.setPaysAdresse(paysAdresse);
			objet.setVilleAdresse(villeAdresse);
			objet.setTaTAdr(taTAdr);
		} catch (Exception e) {
			logger.error("", e);
		}
		// on renvoie le clone
		return objet;
	}

}
