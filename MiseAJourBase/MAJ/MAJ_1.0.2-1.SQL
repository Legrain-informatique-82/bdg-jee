CREATE or ALTER  PROCEDURE GESTION_CREATION_1
as    
DECLARE VARIABLE QUERY VARCHAR(255);
BEGIN
query = 'ALTER DOMAIN DLIB1L TYPE VARCHAR(1)';
IF (not exists( select RDB$FIELD_NAME from RDB$FIELDS where RDB$FIELD_NAME = 'DLIB1L')) THEN
query = 'CREATE DOMAIN DLIB1L AS VARCHAR(1)';

EXECUTE STATEMENT :query;

END
^

EXECUTE PROCEDURE GESTION_CREATION_1 
^
drop procedure GESTION_CREATION_1
^


update RDB$RELATION_FIELDS set
RDB$FIELD_SOURCE = 'DLIB1L'
where (RDB$FIELD_NAME = 'CODE_T_TVA_L_FACTURE') and
(RDB$RELATION_NAME = 'TA_L_FACTURE')
^


update RDB$RELATION_FIELDS set
RDB$FIELD_SOURCE = 'DLIB1L'
where (RDB$FIELD_NAME = 'CODE_T_TVA_L_FACTURE') and
(RDB$RELATION_NAME = 'TA_L_FACTURE_TEMP')
^
